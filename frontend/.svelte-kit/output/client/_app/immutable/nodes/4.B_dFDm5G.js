import{S as Z,i as $,s as ee,d as h,y as z,z as S,m as c,A as te,b as B,c as f,o as ae,h as I,e as y,f as D,u as R,g as F,p as j,k as T,j as C,v as W,t as H,l as se,q as re,a as G,n as M,r as ne,B as oe,C as le,D as ie,E as de,F as ce}from"../chunks/udWJkB2W.js";import"../chunks/IHki7fMi.js";import{p as ue}from"../chunks/D74eoekk.js";import{g as A}from"../chunks/DnrJa5CO.js";import{P as X}from"../chunks/DtMNPjmS.js";import{a as U}from"../chunks/xuENUTr7.js";import{P as fe}from"../chunks/DEmDFwBb.js";function Y(n){let e,t,a=n[1].firstName+"",s,o,r=n[1].lastName+"",u,i;return{c(){e=C("p"),t=H("Update "),s=H(a),o=T(),u=H(r),i=H("'s information"),this.h()},l(m){e=y(m,"P",{class:!0});var d=D(e);t=F(d,"Update "),s=F(d,a),o=I(d),u=F(d,r),i=F(d,"'s information"),d.forEach(h),this.h()},h(){c(e,"class","text-gray-600 mt-1")},m(m,d){B(m,e,d),f(e,t),f(e,s),f(e,o),f(e,u),f(e,i)},p(m,d){d&2&&a!==(a=m[1].firstName+"")&&G(s,a),d&2&&r!==(r=m[1].lastName+"")&&G(u,r)},d(m){m&&h(e)}}}function me(n){let e,t='<p class="text-gray-500">Person not found</p> <a href="/" class="text-blue-600 hover:text-blue-800 font-medium mt-2 inline-block">Go back home</a>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(a){e=y(a,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-hemg8m"&&(e.innerHTML=t),this.h()},h(){c(e,"class","text-center py-12")},m(a,s){B(a,e,s)},p:M,i:M,o:M,d(a){a&&h(e)}}}function he(n){let e,t,a;return t=new fe({props:{person:n[1],loading:n[3],submitLabel:"Update Person",religionCasteData:n[0].religionCasteData}}),t.$on("submit",n[7]),t.$on("cancel",n[8]),{c(){e=C("div"),de(t.$$.fragment),this.h()},l(s){e=y(s,"DIV",{class:!0});var o=D(e);ie(t.$$.fragment,o),o.forEach(h),this.h()},h(){c(e,"class","bg-white shadow-sm rounded-lg p-6")},m(s,o){B(s,e,o),le(t,e,null),a=!0},p(s,o){const r={};o&2&&(r.person=s[1]),o&8&&(r.loading=s[3]),o&1&&(r.religionCasteData=s[0].religionCasteData),t.$set(r)},i(s){a||(S(t.$$.fragment,s),a=!0)},o(s){z(t.$$.fragment,s),a=!1},d(s){s&&h(e),oe(t)}}}function pe(n){let e,t,a="Error loading person",s,o,r,u,i,m="Try again",d,N;return{c(){e=C("div"),t=C("p"),t.textContent=a,s=T(),o=C("p"),r=H(n[4]),u=T(),i=C("button"),i.textContent=m,this.h()},l(p){e=y(p,"DIV",{class:!0});var g=D(e);t=y(g,"P",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-qm0id1"&&(t.textContent=a),s=I(g),o=y(g,"P",{class:!0});var b=D(o);r=F(b,n[4]),b.forEach(h),u=I(g),i=y(g,"BUTTON",{class:!0,"data-svelte-h":!0}),j(i)!=="svelte-1yrcvu6"&&(i.textContent=m),g.forEach(h),this.h()},h(){c(t,"class","font-medium"),c(o,"class","text-sm mt-1"),c(i,"class","mt-2 text-red-800 hover:text-red-900 font-medium text-sm underline"),c(e,"class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md")},m(p,g){B(p,e,g),f(e,t),f(e,s),f(e,o),f(o,r),f(e,u),f(e,i),d||(N=ne(i,"click",n[10]),d=!0)},p(p,g){g&16&&G(r,p[4])},i:M,o:M,d(p){p&&h(e),d=!1,N()}}}function _e(n){let e,t='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(a){e=y(a,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-5e6cdk"&&(e.innerHTML=t),this.h()},h(){c(e,"class","flex justify-center items-center h-64")},m(a,s){B(a,e,s)},p:M,i:M,o:M,d(a){a&&h(e)}}}function ve(n){let e,t,a,s,o,r,u,i,m,d,N,p,g="Edit Person",b,_,k,P,L;document.title=e=n[1]?`Edit ${n[1].firstName} ${n[1].lastName} - Person Manager`:"Loading... - Person Manager";let v=n[1]&&Y(n);const O=[_e,pe,he,me],w=[];function J(l,E){return l[2]?0:l[4]?1:l[1]?2:3}return k=J(n),P=w[k]=O[k](n),{c(){t=T(),a=C("div"),s=C("div"),o=C("nav"),r=C("a"),u=W("svg"),i=W("path"),m=H(`
				Back to Details`),N=T(),p=C("h1"),p.textContent=g,b=T(),v&&v.c(),_=T(),P.c(),this.h()},l(l){ae("svelte-vpq1g",document.head).forEach(h),t=I(l),a=y(l,"DIV",{class:!0});var x=D(a);s=y(x,"DIV",{class:!0});var V=D(s);o=y(V,"NAV",{class:!0});var K=D(o);r=y(K,"A",{href:!0,class:!0});var q=D(r);u=R(q,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0});var Q=D(u);i=R(Q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),D(i).forEach(h),Q.forEach(h),m=F(q,`
				Back to Details`),q.forEach(h),K.forEach(h),N=I(V),p=y(V,"H1",{class:!0,"data-svelte-h":!0}),j(p)!=="svelte-1uiso2u"&&(p.textContent=g),b=I(V),v&&v.l(V),V.forEach(h),_=I(x),P.l(x),x.forEach(h),this.h()},h(){c(i,"stroke-linecap","round"),c(i,"stroke-linejoin","round"),c(i,"stroke-width","2"),c(i,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),c(u,"class","w-4 h-4 mr-1"),c(u,"fill","none"),c(u,"viewBox","0 0 24 24"),c(u,"stroke","currentColor"),c(r,"href",d=n[1]?`/person/${n[1]._id}`:"/"),c(r,"class","text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center"),c(o,"class","flex mb-4"),c(p,"class","text-2xl font-bold text-gray-900"),c(s,"class","mb-6"),c(a,"class","max-w-2xl mx-auto")},m(l,E){B(l,t,E),B(l,a,E),f(a,s),f(s,o),f(o,r),f(r,u),f(u,i),f(r,m),f(s,N),f(s,p),f(s,b),v&&v.m(s,null),f(a,_),w[k].m(a,null),L=!0},p(l,[E]){(!L||E&2)&&e!==(e=l[1]?`Edit ${l[1].firstName} ${l[1].lastName} - Person Manager`:"Loading... - Person Manager")&&(document.title=e),(!L||E&2&&d!==(d=l[1]?`/person/${l[1]._id}`:"/"))&&c(r,"href",d),l[1]?v?v.p(l,E):(v=Y(l),v.c(),v.m(s,null)):v&&(v.d(1),v=null);let x=k;k=J(l),k===x?w[k].p(l,E):(ce(),z(w[x],1,1,()=>{w[x]=null}),te(),P=w[k],P?P.p(l,E):(P=w[k]=O[k](l),P.c()),S(P,1),P.m(a,null))},i(l){L||(S(P),L=!0)},o(l){z(P),L=!1},d(l){l&&(h(t),h(a)),v&&v.d(),w[k].d()}}}function ge(n,e,t){let a,s;se(n,ue,b=>t(9,s=b));let{data:o}=e,r=null,u=!0,i=!1,m="";re(async()=>{a&&await d(a)});async function d(b){try{t(2,u=!0),t(4,m=""),t(1,r=await X.getById(b))}catch{t(4,m="Failed to load person details"),U("Failed to load person details","error")}finally{t(2,u=!1)}}async function N(b){if(!(r!=null&&r._id))return;const _=b.detail;try{t(3,i=!0);const k={firstName:_.firstName,lastName:_.lastName,email:_.email,phone:_.phone,address:{street:_.street||"",city:_.city||"",state:_.state||"",zipCode:_.zipCode||"",country:_.country||""},religion:_.religion||"",caste:_.caste||"",image:_.image||""};await X.update(r._id,k),U("Person updated successfully","success"),A(`/person/${r._id}`)}catch{U("Failed to update person","error")}finally{t(3,i=!1)}}function p(){r!=null&&r._id?A(`/person/${r._id}`):A("/")}const g=()=>a&&d(a);return n.$$set=b=>{"data"in b&&t(0,o=b.data)},n.$$.update=()=>{n.$$.dirty&512&&t(5,a=s.params.id)},[o,r,u,i,m,a,d,N,p,s,g]}class Ne extends Z{constructor(e){super(),$(this,e,ge,ve,ee,{data:0})}}export{Ne as component};
